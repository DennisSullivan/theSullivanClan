    /* ============================================================
       PIPS ENGINE — GLOBAL STYLESHEET
       Clean, modern, mobile‑first foundation for region puzzles
       ============================================================ */
    
    /* ------------------------------
       CSS VARIABLES (THEME)
       ------------------------------ */
    :root {
      --bg: #faf8f4;
      --grid-bg: #ffffff;
      --line: #333;
      --region-outline: #444;
      --region-fill: rgba(0, 0, 0, 0.04);
      --cell-size: 48px;
      --cell-gap: 2px;
      --radius: 6px;
    
      --domino-bg: #fff;
      --domino-border: #222;
      --domino-shadow: rgba(0, 0, 0, 0.15);
    
      --accent: #7a4c24; /* warm SullivanClan brown */
    }
    
    /* Mobile scaling */
    @media (max-width: 600px) {
      :root {
        --cell-size: 38px;
      }
    }

    /* ------------------------------
       PAGE LAYOUT
       ------------------------------ */
    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      font-family: system-ui, sans-serif;
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    /* Optional header bar */
    .pips-header {
      width: 100%;
      padding: 12px 20px;
      background: var(--accent);
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
      letter-spacing: 0.5px;
    }
    
    // JASON formats
    .region-A { background-color: rgba(255, 0, 0, 0.1); }
    .region-B { background-color: rgba(0, 255, 0, 0.1); }
    
    /* ------------------------------
       GRID CONTAINER
       ------------------------------ */
    #pips-root {
      position: relative;
    }
    .pips-grid {
      display: grid;
      background: var(--grid-bg);
      padding: 10px;
      border-radius: var(--radius);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      gap: var(--cell-gap);
      position: relative;
      margin-top: 20px;
    }
    
    /* The JS will set grid-template-columns dynamically */
    .pips-cell {
      width: var(--cell-size);
      height: var(--cell-size);
      background: white;
      border: 1px solid var(--line);
      border-radius: 4px;
      position: relative;
      box-sizing: border-box;
    }
    
    /* ------------------------------
       REGION OUTLINES
       ------------------------------ */
    
    /* Base region class — JS will add region-A, region-B, etc. */
    .region {
      position: absolute;
      border: 2px solid var(--region-outline);
      background: var(--region-fill);
      border-radius: var(--radius);
      pointer-events: none; /* regions never block dominos */
      box-sizing: border-box;
    }
    
    /* Optional region labels */
    .region-label {
      position: absolute;
      top: -14px;
      left: 4px;
      background: var(--accent);
      color: white;
      padding: 2px 6px;
      font-size: 0.7rem;
      border-radius: 4px;
      pointer-events: none;
    }
    
    /* ------------------------------
       DOMINO TRAY + TILES
       ------------------------------ */
    .tray-slot {
      width: calc(var(--cell-size) * 2 + var(--cell-gap));
      height: var(--cell-size);
      position: relative;
      border: 1px solid transparent; /* invisible placeholder */
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .tray-slot .domino {
      position: relative; /* domino sits normally inside the slot */
    }
    .domino-tray {
      margin-top: 24px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    
    /* ============================================================
       DOMINO TILE — COMPLETE BLOCK
       ============================================================ */
    .domino {
      position: relative;
      width: calc(var(--cell-size) * 2 + var(--cell-gap));
      height: var(--cell-size);
      background: var(--domino-bg);
      border: 2px solid var(--domino-border);
      border-radius: var(--radius);
      box-shadow: 0 2px 4px var(--domino-shadow);
      cursor: grab;
      user-select: none;
      transition: transform 0.15s ease;
      display: grid;
      grid-template-columns: 1fr 1fr;
      place-items: center;   /* centers pip-groups in each half */
      box-sizing: border-box;
    }

    .domino.vertical {
      width: var(--cell-size);
      height: calc(var(--cell-size) * 2 + var(--cell-gap));
      flex-direction: column;
      justify-content: space-between;
      padding-top: 8px;
      padding-bottom: 8px;
      box-sizing: border-box;   /* <-- SAME FIX HERE */
    }
  
    /* Center dividing line */
    .domino::after {
      content: "";
      position: absolute;
      background: var(--domino-border);
      opacity: 0.8;
    }
    
    .domino:not(.vertical)::after {
      width: 2px;
      height: 80%;
      left: 50%;
      top: 10%;
      transform: translateX(-1px);
    }
    
    .domino.vertical::after {
      height: 2px;
      width: 80%;
      top: 50%;
      left: 10%;
      transform: translateY(-1px);
    }

    /* Hard-sized pip cluster box — always centered, never expands */
    .pip-group {
      width: 28px;
      height: 28px;
      margin: auto;        /* centers horizontally AND vertically */
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      place-items: center;
    }

    /* Small, tight pips */
    .pip {
      width: 8px;
      height: 8px;
      background: var(--line);
      border-radius: 50%;
    }
    
    /* ------------------------------
       PLACEMENT STATES
       ------------------------------ */
    .cell-highlight {
      outline: 3px solid var(--accent);
      outline-offset: -3px;
    }
    
    .cell-invalid {
      background: #f8d0d0;
      border-color: #b33;
    }
    
    /* When a domino is snapped into place */
    .domino-placed {
      box-shadow: none;
      cursor: default;
      opacity: 0.95;
    }
    
    /* ------------------------------
       UTILITY CLASSES
       ------------------------------ */
    .hidden {
      display: none !important;
    }
    
    .center {
      display: flex;
      justify-content: center;
      align-items: center;
    }
